<!doctype html>
<html
	lang="en" >
	<head>
		<title>
            Caio Raphael
		</title>
		<meta
			charset="utf-8" >
		<meta
			name="viewport" 
			content="width=device-width, initial-scale=1" >
		<meta
			name="description" 
			content="Senior Game Developer, Engine Developer, Low-Level Network, Low-Level Systems" >
		<meta
			name="author" 
			content="Caio Raphael" >
		<meta
			name="theme-color" 
			content="#ffffff" 
			media="(prefers-color-scheme: light)" >
		<meta
			name="theme-color" 
			content="#101010" 
			media="(prefers-color-scheme: dark)" >
		<link
			rel="icon" 
			href="/assets/icon.ico" >
		<link
			rel="icon" 
			href="/assets/icon-16x16.png" 
			sizes="16x16" 
			type="image/png" >
		<link
			rel="icon" 
			href="/assets/icon-32x32.png" 
			sizes="32x32" 
			type="image/png" >
		<script>
window.MathJax = {
                tex: {
                    inlineMath: [['$', '$']],
                    displayMath: [['$$', '$$']]
                }
                };
		</script>
		<script
			src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" >
		</script>
		<script
			type="module" >

                    import hljs from 'https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/highlight.min.js';
                    import hljs_odin from 'https://unpkg.com/highlightjs-odinlang@1.4.0/dist/odin.es.min.js';
                    import hljs_glsl from 'https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/languages/glsl.min.js';
                    import hljs_swift  from 'https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/languages/swift.min.js';
                    hljs.registerLanguage('odin', hljs_odin);
                    hljs.registerLanguage('glsl', hljs_glsl);
                    hljs.registerLanguage('gdscript', hljs_swift);
                    hljs.highlightAll();
                
		</script>
		<link
			rel="stylesheet" 
			href="/static/studies.94901.css" >
	</head>
	<body>
		<aside
			id="left-sidebar" >
			<header>
				<a
					href="/" 
					class="site-logo" >
                    Caio Raphael
				</a>
				<p
					class="breadcrums-division" >
                    /
				</p>
				<a
					href="/studies/_index.html" 
					class="breadcrumbs-studies" >
                    Studies
				</a>
			</header>
			<nav>
				<details
					open="">
					<summary>
                        Odin
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-overview.html" >
                                Overview
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-my-impressions.html" >
                                My Impressions
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-installation.html" >
                                Installation
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-building.html" >
                                Building
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-compile-time-stuff.html" >
                                Compile-time Stuff
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-package-system.html" >
                                Package System
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-lsp-ols-odin-language-server.html" >
                                LSP (OLS - Odin Language Server)
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-operations.html" >
                                Operations
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-control-flow-if-when-switch-for-defer.html" >
                                Control Flow (if, when, switch, for, defer)
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-procedures.html" >
                                Procedures
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-typing.html" >
                                Typing
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-any.html" >
                                any
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-primitive-types.html" >
                                Primitive Types
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-matrix.html" >
                                Matrix
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-quaternion.html" >
                                Quaternion
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-complex.html" >
                                Complex
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-strings.html" >
                                Strings
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-rune.html" >
                                Rune
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-maps-hash-maps.html" >
                                Maps (Hash Maps)
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-struct.html" >
                                Struct
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-union.html" >
                                Union
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-bit-sets.html" >
                                Bit Sets
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-arrays.html" >
                                Arrays
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-interfaces-methods-vtables.html" >
                                Interfaces / Methods / VTables
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-error-handling.html" >
                                Error Handling
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-context.html" >
                                Context
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="active" 
								href="/studies/Low-Level Systems/Odin/Odin-memory.html" >
                                Memory
							</a>
							<ul>
								<li>
									<a
										href="#assignment" >
                                        Assignment
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#size" >
                                        Size
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#memory-leaks" >
                                        Memory Leaks
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#stack-use-after-return" >
                                        Stack-Use-After-Return
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#use-after-free-uaf" >
                                        Use-After-Free (UAF)
									</a>
									<ul>
									</ul>
								</li>
							</ul>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-memory-address.html" >
                                Memory: Address
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-memory-allocators.html" >
                                Memory: Allocators
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-memory-operations.html" >
                                Memory: Operations
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-entry-point.html" >
                                Entry Point
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-multi-threading.html" >
                                Multi-Threading
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-simd.html" >
                                SIMD
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-directives.html" >
                                Directives
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-ffi-foreign-function-interface-bindings.html" >
                                FFI (Foreign Function Interface) / Bindings
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-web-build.html" >
                                Web Build
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-file-system-process-cli-shell.html" >
                                File System / Process / CLI / Shell
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Odin/Odin-useful-packages.html" >
                                Useful Packages
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Memory
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Memory/Memory-virtual-memory.html" >
                                Virtual Memory
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Memory/Memory-os-memory-on-windows.html" >
                                OS: Memory on Windows
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Memory/Memory-memory-alignment.html" >
                                Memory Alignment
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Memory/Memory-address.html" >
                                Address
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Memory/Memory-allocators.html" >
                                Allocators
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Memory/Memory-tools-memory-analysis.html" >
                                Tools: Memory Analysis
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Memory/Memory-handles-instead-of-pointers.html" >
                                Handles instead of Pointers
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Memory/Memory-ownership-strategies-destruction-strategies.html" >
                                Ownership Strategies / Destruction Strategies
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Memory/Memory-strategies-for-handling-short-lived-memory.html" >
                                Strategies for handling short lived memory
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Memory/Memory-garbage-collection.html" >
                                Garbage Collection
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Memory/Memory-initialization.html" >
                                Initialization
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        CPU
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/CPU/CPU-concepts.html" >
                                Concepts
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/CPU/CPU-physical-structure.html" >
                                Physical Structure
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/CPU/CPU-cache.html" >
                                Cache
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/CPU/CPU-soa-struct-of-arrays-ecs-entity-component-system.html" >
                                SOA (Struct Of Arrays) / ECS (Entity Component System)
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/CPU/CPU-simd.html" >
                                SIMD
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Multithreading
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Multithreading/Multithreading-core-concepts.html" >
                                Core Concepts
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Multithreading/Multithreading-thread.html" >
                                Thread
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Multithreading/Multithreading-strategies.html" >
                                Strategies
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Multithreading/Multithreading-implementation-detail.html" >
                                Implementation Detail
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Multithreading/Multithreading-synchronization-primitives.html" >
                                Synchronization Primitives
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Multithreading/Multithreading-double-buffering.html" >
                                Double-Buffering
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Multithreading/Multithreading-networking-strategies.html" >
                                Networking Strategies
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Handmade Hero
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Handmade Hero/Handmade Hero-handmade-hero.html" >
                                Handmade Hero
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Profilers
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Profilers/Profilers-tracy.html" >
                                Tracy
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Profilers/Profilers-spall.html" >
                                Spall
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Profilers/Profilers-nvidia-nsight-graphics-gpu-trace.html" >
                                Nvidia Nsight Graphics - GPU Trace
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Profilers/Profilers-amd-gpu-profiler-amd-rgp.html" >
                                AMD GPU Profiler (AMD RGP)
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Profilers/Profilers-intel-gpa.html" >
                                Intel GPA
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Profilers/Profilers-nsight-systems.html" >
                                <s>Nsight Systems</s>
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        C
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-basic.html" >
                                Basic
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-critiques.html" >
                                Critiques
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-c-standard.html" >
                                C Standard
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-c-standard-library-libc.html" >
                                C Standard Library (libc)
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-building.html" >
                                Building
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-memory.html" >
                                Memory
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-loops.html" >
                                Loops
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-strings.html" >
                                Strings
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-structs.html" >
                                Structs
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-pointers.html" >
                                Pointers
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-arrays.html" >
                                Arrays
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-preprocessors.html" >
                                Preprocessors
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-undefined-behavior.html" >
                                Undefined Behavior
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-gamedev.html" >
                                GameDev
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/C-windows-c-api.html" >
                                WIndows C API
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Build Systems - Compilation - Linking
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Build Systems - Compilation - Linking/Build Systems - Compilation - Linking-compilation-process.html" >
                                Compilation Process
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Build Systems - Compilation - Linking/Build Systems - Compilation - Linking-compilers.html" >
                                Compilers
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Build Systems - Compilation - Linking/Build Systems - Compilation - Linking-build-tools.html" >
                                Build Tools
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Build Systems - Compilation - Linking/Build Systems - Compilation - Linking-meta-build-tools.html" >
                                Meta Build Tools
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Build Systems - Compilation - Linking/Build Systems - Compilation - Linking-extra-annoying-things-on-windows.html" >
                                Extra: Annoying things on Windows
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Debuggers
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Debuggers-file-types.html" >
                                File Types
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Debuggers-rad-debbuger.html" >
                                RAD Debbuger
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Debuggers-gdb-gnu-debugger.html" >
                                GDB (GNU Debugger)
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Debuggers-lldb.html" >
                                LLDB
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Debuggers-vscode.html" >
                                VSCode
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Debuggers-visual-studio-debugger.html" >
                                Visual Studio Debugger
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Debuggers-others.html" >
                                Others
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Debuggers-web.html" >
                                Web
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Assembly - ASM
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Assembly/Assembly - ASM-notes.html" >
                                Notes
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Assembly/Assembly - ASM-operations.html" >
                                Operations
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Assembly/Assembly - ASM-reverse-engineering.html" >
                                Reverse Engineering
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Parsing
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Parsing-parsing.html" >
                                Parsing
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Parsing-lexer.html" >
                                Lexer
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/Parsing-tools.html" >
                                Tools
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        JAI
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/JAI-about.html" >
                                About
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/JAI-build.html" >
                                Build
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/JAI-types.html" >
                                Types
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/JAI-meta-programming.html" >
                                Meta programming
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Low-Level Systems/JAI-control-flow.html" >
                                Control flow
							</a>
						</li>
					</ul>
				</details>
			</nav>
		</aside>
		<div
			id="central-wrapper" >
			<a
				href="/" 
				class="icon-home" >

                <svg version="1.1" id="Capa_1" fill="currentColor" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 299.021 299.021" xml:space="preserve" style="color: whitesmoke;">
                    <g>
                        <g>
                            <path d="M292.866,254.432c-2.288,0-4.443-1.285-5.5-3.399c-0.354-0.684-28.541-52.949-146.169-54.727v51.977
                                c0,2.342-1.333,4.48-3.432,5.513c-2.096,1.033-4.594,0.793-6.461-0.63L2.417,154.392C0.898,153.227,0,151.425,0,149.516
                                c0-1.919,0.898-3.72,2.417-4.888l128.893-98.77c1.87-1.426,4.365-1.667,6.461-0.639c2.099,1.026,3.432,3.173,3.432,5.509v54.776
                                c3.111-0.198,7.164-0.37,11.947-0.37c43.861,0,145.871,13.952,145.871,143.136c0,2.858-1.964,5.344-4.75,5.993
                                C293.802,254.384,293.34,254.432,292.866,254.432z"></path>
                        </g>
                    </g>
                </svg>
                    
			</a>
			<main>
				<article
					id="note-article" >
					<header>
						<h1>
                            Memory
						</h1>
						<p>
							<time
								datetime="2025-03-28" >
                                üïí Created: 2025-03-28
							</time>
							<time
								datetime="2026-01-22" >
                                | Updated: 2026-01-22
							</time>
						</p>
					</header>
					<div
						id="note-content" >
<ul>
	<li>
		<p>
            Odin does not have a Garbage Collector (GC).
		</p>
	</li>
</ul>
<h3
	id="assignment" >
    Assignment
</h3>
<h5
	id="copy" >
    Copy
</h5>
<ul>
	<li>
		<p>
            &quot;
            <code>a = b</code>
            &nbsp;makes a copy?&quot;
		</p>
		<ul>
			<li>
				<p>
                    It copies 
                    <code>b</code>
                    &nbsp;itself, but if 
                    <code>b</code>
                    &nbsp;is (or contains) a pointer, the data behind that pointer won't get cloned.
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
			<strong>
                Pointers
			</strong>
            :
		</p>
		<ul>
			<li>
				<p>
					<em>
                        Pointers aren't magical. They're values that (can) point to other values.
					</em>
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
			<strong>
                Maps
			</strong>
            :
		</p>
		<ul>
			<li>
				<p>
                    Keys and values are 
					<em>
                        always
					</em>
                    &nbsp;copied.
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
			<strong>
                Procedures
			</strong>
            :
		</p>
		<ul>
			<li>
				<p>
                    Parameters:
				</p>
				<ul>
					<li>
						<p>
                            Are 
							<em>
                                always
							</em>
                            &nbsp;passed by copy.
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
                    Returns:
				</p>
				<ul>
					<li>
						<p>
							<input
								type="checkbox" 
								disabled=""
>
                            Copy or move?
						</p>
					</li>
				</ul>
			</li>
		</ul>
	</li>
</ul>
<h3
	id="size" >
    Size
</h3>
<ul>
	<li>
		<p>
            The word 
            <code>size</code>
            &nbsp;is used to denote the 
			<strong>
                size in bytes
			</strong>
            .
		</p>
	</li>
	<li>
		<p>
            The word 
            <code>length</code>
            &nbsp;is used to denote the count of objects.
		</p>
	</li>
	<li>
		<p>
			<a
				href="https://pkg.odin-lang.org/base/builtin/#size_of" 
				class="external-link" 
				target="_blank" >
                <code>size_of</code>
			</a>
            .
		</p>
		<ul>
			<li>
				<p>
                    This is evaluated at 
					<em>
                        compile-time
					</em>
                    .
				</p>
			</li>
			<li>
				<p>
                    Takes an expression or type, and returns the size in bytes of the type of the expression if it was hypothetically instantiated as a variable.
				</p>
			</li>
			<li>
				<p>
                    The size does not include any memory possibly referenced by a value.
				</p>
			</li>
			<li>
				<p>
					<strong>
                        Slice
					</strong>
                    :
				</p>
				<ul>
					<li>
						<p>
                            This would return the size of the internal slice data structure and not the size of the memory referenced by the slice.
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
					<strong>
                        Struct
					</strong>
                    :
				</p>
				<ul>
					<li>
						<p>
                            Return size includes any padding introduced by field alignment (if not specified with 
                            <code>#packed</code>
                            ).
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
                    Other types follow similar rules.
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
			<a
				href="https://pkg.odin-lang.org/core/reflect/#size_of_typeid" 
				class="external-link" 
				target="_blank" >
                <code>reflect.size_of_typeid</code>
			</a>
            .
		</p>
		<ul>
			<li>
				<p>
                    This is evaluated at 
					<em>
                        runtime
					</em>
                    .
				</p>
			</li>
			<li>
				<p>
                    Returns the size of the type that the passed typeid represents
				</p>
			</li>
		</ul>
	</li>
</ul>
<h3
	id="memory-leaks" >
    Memory Leaks
</h3>
<ul>
	<li>
		<p>
            If the procedure does not free the memory automatically, then everything that had memory allocated must be returned from the procedure, otherwise we'll have a 
			<strong>
                memory leak
			</strong>
            .
		</p>
	</li>
	<li>
		<p>
            While inside a procedure, if I create something on the heap I should 
			<em>
                always
			</em>
            &nbsp;return its pointer and not its value.
		</p>
	</li>
	<li>
		<p>
            If you return by value, you're returning it on the stack; except any pointers that value may contain
		</p>
	</li>
	<li>
		<p>
            The only way to reference allocated memory is by pointer (note that slices, 
            <code>string</code>
            s, etc., have pointers internally, so those count)
		</p>
	</li>
</ul>
<h5
	id="if-a-procedure-allocates-internally" >
    If a procedure allocates internally
</h5>
<ul>
	<li>
		<p>
            Options:
		</p>
		<ol>
			<li>
				<p>
                    Pass an allocator as one of the parameters and return the object that will need freeing.
				</p>
				<ul>
					<li>
						<p>
                            Requiring an allocators is important to avoid &quot;implicit allocations&quot;, which remove the agency from the user and makes easier to get memory leaks by accident, as it's not obvious something needs to be freed unless you read through the procedure implementation. C sometimes does this, which is bad.
						</p>
					</li>
					<li>
						<p>
                            Returning the allocated objects is a must to avoid memory leaks, otherwise the &quot;handle&quot; to the allocation is lost and you'll likely get a memory leak, unless the allocation was made using a Arena allocator, or similar, so by freeing the arena everything allocated with it is freed.
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
                    Create the object outside and pass the pointer to the object as a parameter.
				</p>
				<ul>
					<li>
						<p>
                            This is a way to avoid a new object being created inside the procedure. It just modifies an existing object, which will know to delete.
						</p>
					</li>
				</ul>
			</li>
		</ol>
	</li>
</ul>
<h5
	id="examples" >
    Examples
</h5>
<ul>
	<li>
		<p>
            Will leak.
		</p>
<pre><code class="language-odin" data-lang="odin">create_data :: proc(allocator: mem.Allocator) -&gt; (data: Data) { 
&nbsp;&nbsp;&nbsp;&nbsp;data_ptr := new(Data, allocator = allocator) 
&nbsp;&nbsp;&nbsp;&nbsp;data_ptr^ = { .. something } 
&nbsp;&nbsp;&nbsp;&nbsp;data = data_ptr^ 
&nbsp;&nbsp;&nbsp;&nbsp;return 
} 
my_data := create_data(context.allocator) 
free(&my_data)
</code></pre>
		<ul>
			<li>
				<p>
                    <code>data = data_ptr^</code>
                    &nbsp;copies the data from the allocation back to the stack, and then the pointer to the allocation is forgotten.
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            Will not leak:
		</p>
<pre><code class="language-odin" data-lang="odin">create_data :: proc(allocator: mem.Allocator) -&gt; (data_ptr: ^Data) { 
&nbsp;&nbsp;&nbsp;&nbsp;data_ptr = new(Data, allocator = allocator) 
&nbsp;&nbsp;&nbsp;&nbsp;data_ptr^ = { .. something } 
&nbsp;&nbsp;&nbsp;&nbsp;return
} 
my_data_ptr := create_data(context.allocator) 
free(my_data_ptr)
</code></pre>
	</li>
</ul>
<h3
	id="stack-use-after-return" >
    Stack-Use-After-Return
</h3>
<h5
	id="pointer-to-a-pointer-on-the-stack" >
    Pointer to a pointer on the stack
</h5>
<ul>
	<li>
		<p>
            If I have a procedure that does 
            <code>x: ^int = new_clone(123)</code>
            , if I return 
            <code>&x</code>
            , is this a stack-use-after-return bug?
		</p>
	</li>
	<li>
		<p>
            Pointer or not, 
            <code>x</code>
            &nbsp;is still a local variable, so 
            <code>&x</code>
            &nbsp;would be a pointer 
			<em>
                to
			</em>
            &nbsp;a pointer on the stack, yes. The thing that 
            <code>x</code>
            &nbsp;
			<em>
                points to
			</em>
            , however, is not.
		</p>
	</li>
</ul>
<h5
	id="examples" >
    Examples
</h5>
<pre><code class="language-odin" data-lang="odin">x_proc :: proc() -&gt; ^int {
¬† ¬† x_value: int = 123
¬† ¬† return &x_value
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// `x` is a value stored in the stack, while `&x` is a pointer to a value stored in the stack; this is invalid.
¬† ¬† ¬† ¬† // Compiler Error: It is unsafe to return the address of a local variable ('&x_value') from a procedure, as it uses the current stack frame's memory
}

a_proc :: proc() -&gt; ^int {
¬† ¬† a_slice := make([]int, 4, context.temp_allocator)
¬† ¬† a_slice[2] = 30
¬† ¬† return &a_slice[2]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// `a_slice[2]` is a value stored in the heap, while `&a_slice[2]` is a pointer to a value stored in the heap, so it's fine.
}

b_proc :: proc() -&gt; (a: any) {
¬† ¬† b_slice := make([]int, 4, context.temp_allocator)
¬† ¬† b_slice[2] = 30
¬† ¬† return b_slice[2]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// `b_slice[2]` is a value stored in the heap, while `a: any = &b_slice[2]` which is a pointer to a value stored in the heap, so it's fine.
}

c_proc :: proc() -&gt; (a: any) {
¬† ¬† c_slice := make([]int, 4, context.temp_allocator)
¬† ¬† c_slice[2] = 30
¬† ¬† return &c_slice[2]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// `&c_slice[2]` is a pointer to a value stored in the heap, but `any` created an implicit indirection with `_tmp`.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// So, this ends up being `c.data = &_tmp`, where `_tmp` is in the stack of `c_proc`, so this is invalid.
}

main :: proc() {
¬† ¬† a := a_proc()
¬† ¬† fmt.printfln("a: ¬† ¬†%v", a) ¬† ¬† ¬† ¬† ¬† ¬†// prints an address
¬† ¬† fmt.printfln("a^: ¬† %v", a^) ¬† ¬† ¬† ¬† ¬† // prints '30'
¬† ¬† 
¬† ¬† b := b_proc()
¬† ¬† fmt.printfln("b: ¬† ¬† ¬† %v", b) ¬† ¬† ¬† ¬† // prints '30'
¬† ¬† fmt.printfln("b.(): ¬† ¬†%v", b.(int)) ¬† // prints '30'
¬† ¬† fmt.printfln("b.data: ¬†%v", b.data) ¬† ¬†// prints an address
¬† ¬† // fmt.printfln("b.data^: %v", b.data^) ¬† // Not possible to dereference rawptr.
¬† ¬† 
¬† ¬† c := c_proc()
¬† ¬† fmt.printfln("c: ¬† ¬† ¬†%v", c) ¬† ¬† ¬† ¬† ¬†// Invalid. This is accessing invalid memory; ASan doesn't crash, but it should.
¬† ¬† fmt.printfln("c^: ¬† ¬† %v", c.(^int)) ¬† // Invalid. This is accessing invalid memory; ASan doesn't crash, but it should.
&nbsp;&nbsp;&nbsp;&nbsp;¬† ¬† // Barinzaya: I wonder if `any`s aren't integrated with ASan.
}
</code></pre>
<h3
	id="use-after-free-uaf" >
    Use-After-Free (UAF)
</h3>
<ul>
	<li>
		<p>
			<a
				href="https://github.com/odin-lang/Odin/pull/5072" 
				class="external-link" 
				target="_blank" >
                ASan in base:runtime
			</a>
            .
		</p>
	</li>
</ul>
<h5
	id="rules-against-uaf" >
    Rules against UAF
</h5>
<ul>
	<li>
		<p>
            I should not create an object inside a procedure and store its address somewhere.
		</p>
		<ul>
			<li>
				<p>
                    As soon as the procedure ends, its address will no longer exist.
				</p>
			</li>
			<li>
				<p>
                    Even if you return the object by address, its address will change once it leaves the procedure's stack.
				</p>
			</li>
			<li>
				<p>
                    See the example 'Question: Tracking allocator doesn't work' for more explanation.
				</p>
			</li>
		</ul>
	</li>
</ul>
<h5
	id="address-after-free" >
    Address after free
</h5>
<ul>
	<li>
		<p>
            Doesn't change...
		</p>
	</li>
</ul>
<pre><code class="language-odin" data-lang="odin">int_ptr := new(int)
fmt.println(int_ptr)&nbsp;&nbsp; // 0x262CC7B6518
free(int_ptr)
fmt.println(int_ptr)&nbsp;&nbsp; // 0x262CC7B6518
</code></pre>
<h5
	id="question-tracking-allocator-doesnt-work" >
    Question: Tracking allocator doesn't work
</h5>
<ul>
	<li>
		<p>
            Caio:
		</p>
<pre><code class="language-odin" data-lang="odin">track := init_tracking_allocator()

init_tracking_allocator :: proc() -&gt; mem.Tracking_Allocator { 
&nbsp;&nbsp;&nbsp;&nbsp;track: mem.Tracking_Allocator
&nbsp;&nbsp;&nbsp;&nbsp;mem.tracking_allocator_init(&track, context.allocator) 
&nbsp;&nbsp;&nbsp;&nbsp;context.allocator = mem.tracking_allocator(&track) 
&nbsp;&nbsp;&nbsp;&nbsp;return track
}
</code></pre>
	</li>
	<li>
		<p>
            Barinzaya:
		</p>
		<ul>
			<li>
				<p>
					<a
						href="https://odin-lang.org/docs/overview/#implicit-context-system" 
						class="external-link" 
						target="_blank" >
                        Changes to 
                        <code>context</code>
                        &nbsp;are scoped
					</a>
                    , so after 
                    <code>init_tracking_allocator</code>
                    &nbsp;returns, 
                    <code>context.allocator</code>
                    &nbsp;does not change in the caller.
				</p>
			</li>
			<li>
				<p>
                    The 
					<a
						href="https://pkg.odin-lang.org/base/runtime/#Allocator" 
						class="external-link" 
						target="_blank" >
                        <code>Allocator</code>
					</a>
                    &nbsp;contains a pointer to the underlying allocator data, which is on the stack in 
                    <code>init_tracking_allocator</code>
                    &nbsp;(i.e. it's 
                    <code>&track</code>
                    ) and would no longer be valid after that proc returns. Returning it will 
					<em>
                        move
					</em>
                    &nbsp;it, and invalidate the pointer.
				</p>
				<ul>
					<li>
						<p>
                            any time you use 
                            <code>&</code>
                            &nbsp;on a local variable, the resulting pointer is only valid until the proc that variable is in returns. When you hand out a pointer (i.e. to 
                            <code>mem.tracking_allocator</code>
                            ), you need to be aware of how long that pointer needs to remain valid, and make sure that it's long enough
						</p>
					</li>
				</ul>
			</li>
		</ul>
	</li>
	<li>
		<p>
            Caio:
		</p>
		<ul>
			<li>
				<p>
                    wow, that sounds crazy hard to debug, I mean, sure with practice that comes natural, but how can I check for a reference to a pointer used like that? That's been my question for today. What I mean is, I wish there was a way to make such bugs not silent, because for what it seems, it just corrupts the data without giving any indication of such. There was a lot of suggestions to use a debugger or address sanitization, but both this suggestions require me to be actively looking for something, and what scares me is that I'm not good enough with memory to know when this will happen.
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            Tekk:
		</p>
		<ul>
			<li>
				<p>
                    i saw a project like toybox actually use this behavior to record the beginning of the stack, so this kind of bug isnt something a compiler can check for without being extremely annoying. just like in rust, you can cause memory leaks by forgetting the root node of a linked list; the compiler has no idea what's your intention behind that.
				</p>
			</li>
			<li>
				<p>
                    plus, maybe youre creating a small buffer on the stack, so you might actually want an address to a local variable to pass to a procedure
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            Barinzaya:
		</p>
		<ul>
			<li>
				<p>
                    It does become natural with practice, but there's just no sure-fire way to catch use-after-free issues that doesn't require actively looking for them. Odin is unmanaged, and memory is, fundamentally, just a large array of bytes, it has no concept of who owns it or what it contains beyond &quot;bytes&quot;. The higher-level concepts that we're used to are just a matter of how those bytes are treated
				</p>
			</li>
			<li>
				<p>
                    The trick often comes down to just making your own life easier. Keep things in arrays, rather than separate allocations, use arenas for things that you know have a limited life-time (particularly deeply-nested structures that you know you'll destroy all at once, but can also be good for e.g. &quot;I won't need this after this frame ends&quot;, for instance). These practices are better not only for you to keep track of, but less work for the CPU to do as well
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            jason:
		</p>
		<ul>
			<li>
				<p>
                    I can attest to what Barinzaya said. It does become natural. I can write an entire program start to finish without making that mistake or really giving it any thought.
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            Aunt Esther:
		</p>
		<ul>
			<li>
				<p>
                    I may not understand your issue totally, but if you set up ASAN correctly it catches all the below. Not sure there is anything left to check for. Multi-pointer bounds checks are not covered since you are in C-like territory there, but use those with extreme caution and usually for FFI. IMO most people do not understand these four points and options for ASAN use on windows with Odin -- you CAN use ASAN to detect:
				</p>
				<ol>
					<li>
						<p>
                            Heap variable use after free (UAF) -- Odin does not detect this at compile or runtime.
						</p>
					</li>
					<li>
						<p>
                            Stack (local) variable use after free (UAF) at compile time for local intermediate variables assigned to local variables addresses of pointy local variables, e.g. taking the address of an indexed local variable like a local fixed array and assigning to another local variable for return -- Odin does not catch these at compile OR runtime. (note, Odin will error at compile time for local pointer type variables (e.g. fixed array) that directly have their address used as a return value). Historically stack UAF can sometimes prevent false positives (hence the default false setting), but so far it has not in my experience with Odin.
						</p>
					</li>
					<li>
						<p>
                            For all stack UAF detection, you have to set the ASAN variable 
                            <code>detect_stack_use_after_return</code>
                            &nbsp;to 
                            <code>true</code>
                            &nbsp;before you compile (default value if 
                            <code>false</code>
                            &nbsp;otherwise) - see below for an example build command to actuate these stack UAF features.
						</p>
					</li>
					<li>
						<p>
                            Compile time bounds checks for runtime type violations on both the stack and heap. Odin will catch this class of bugs only at runtime. For example a called proc accesses a runtime variable out of bounds.
						</p>
					</li>
				</ol>
			</li>
			<li>
				<p>
                    Here is an example Odin compiler build command for windows
				</p>
				<ul>
					<li>
						<p>
                            <code>set ASAN_OPTIONS=detect_stack_use_after_return=true & odin run . -debug -warnings-as-errors -sanitize:address -vet-unused-variables -vet-unused-imports -vet-shadowing -vet-style -strict-style -vet-semicolon -out:output.exe</code>
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
                    The above for UAF and bounds checks, plus a debugger (for pinpointing) and the tracking allocators (for leaks and bad/double frees) should cover a lot.
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            Correct code:
		</p>
	</li>
</ul>
<pre><code class="language-odin" data-lang="odin">&nbsp;&nbsp;&nbsp;&nbsp;track := init_tracking_allocator()
¬† ¬† context.allocator = mem.tracking_allocator(&track)

&nbsp;&nbsp;&nbsp;&nbsp;init_tracking_allocator :: proc() -&gt; mem.Tracking_Allocator {
&nbsp;&nbsp;&nbsp;&nbsp;¬† ¬† track: mem.Tracking_Allocator
&nbsp;&nbsp;&nbsp;&nbsp;¬† ¬† mem.tracking_allocator_init(&track, context.allocator)
&nbsp;&nbsp;&nbsp;&nbsp;¬† ¬† return track
&nbsp;&nbsp;&nbsp;&nbsp;}
</code></pre>

					</div>
					<footer
						id="previous-next" >
					</footer>
				</article>
			</main>
			<footer
				id="central-footer" >
                üßë‚Äçüíª built by and copyright
				<a
					href="https://github.com/caioraphael1" 
					target="_blank" >
                    Caio Raphael
				</a>
                üìÖ 2025-10-21 .&nbsp;&nbsp;2026-01-23 üöÄ
			</footer>
		</div>
		<script
			src="/static/studies.94901.js" >
		</script>
	</body>
</html>
