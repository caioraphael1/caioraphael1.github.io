<!doctype html>
<html
	lang="en" >
	<head>
		<title>
            Caio Raphael
		</title>
		<meta
			charset="utf-8" >
		<meta
			name="viewport" 
			content="width=device-width, initial-scale=1" >
		<meta
			name="description" 
			content="Senior Game Developer, Engine Developer, Low-Level Network, Low-Level Systems" >
		<meta
			name="author" 
			content="Caio Raphael" >
		<meta
			name="theme-color" 
			content="#ffffff" 
			media="(prefers-color-scheme: light)" >
		<meta
			name="theme-color" 
			content="#101010" 
			media="(prefers-color-scheme: dark)" >
		<link
			rel="icon" 
			href="/assets/icon.ico" >
		<link
			rel="icon" 
			href="/assets/icon-16x16.png" 
			sizes="16x16" 
			type="image/png" >
		<link
			rel="icon" 
			href="/assets/icon-32x32.png" 
			sizes="32x32" 
			type="image/png" >
		<script>
window.MathJax = {
                tex: {
                    inlineMath: [['$', '$']],
                    displayMath: [['$$', '$$']]
                }
                };
		</script>
		<script
			src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" >
		</script>
		<script
			type="module" >

                    import hljs from 'https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/highlight.min.js';
                    import hljs_odin from 'https://unpkg.com/highlightjs-odinlang@1.4.0/dist/odin.es.min.js';
                    import hljs_glsl from 'https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/languages/glsl.min.js';
                    import hljs_swift  from 'https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/languages/swift.min.js';
                    hljs.registerLanguage('odin', hljs_odin);
                    hljs.registerLanguage('glsl', hljs_glsl);
                    hljs.registerLanguage('gdscript', hljs_swift);
                    hljs.highlightAll();
                
		</script>
		<link
			rel="stylesheet" 
			href="/static/studies.89309.css" >
	</head>
	<body>
		<aside
			id="left-sidebar" >
			<a
				href="/" 
				class="site-logo" >
                Caio Raphael
			</a>
			<nav>
				<details
					open="">
					<summary>
                        Vulkan
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-basic.html" >
                                Basic
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-samples.html" >
                                Samples
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-core.html" >
                                Core
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-render-loop.html" >
                                Render Loop
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-synchronization-and-cache-control.html" >
                                Synchronization and Cache Control
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-command-buffers.html" >
                                Command Buffers
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-pipelines.html" >
                                Pipelines
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-graphics-pipeline.html" >
                                Graphics Pipeline
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-compute-pipeline.html" >
                                Compute Pipeline
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-resources.html" >
                                Resources
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-depth.html" >
                                Depth
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-mapping-data-to-shaders.html" >
                                Mapping Data to Shaders
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-memory-allocation.html" >
                                Memory Allocation
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-hdr-support.html" >
                                HDR Support
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="active" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-profiling.html" >
                                Profiling
							</a>
							<ul>
								<li>
									<a
										href="#support" >
                                        Support
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#query-pool" >
                                        Query Pool
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#writing" >
                                        Writing
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#reading" >
                                        Reading
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#occlusion-queries" >
                                        Occlusion Queries
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#pipeline-statistics-queries" >
                                        Pipeline Statistics Queries
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#performance-queries" >
                                        Performance Queries
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#mesh-shaders-queries" >
                                        Mesh Shaders Queries
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#result-status-queries" >
                                        Result Status Queries
									</a>
									<ul>
									</ul>
								</li>
								<li>
									<a
										href="#other-queries" >
                                        Other Queries
									</a>
								</li>
							</ul>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-mobile.html" >
                                Mobile
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-vr.html" >
                                VR
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-video-decoding.html" >
                                Video Decoding
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-spir-v.html" >
                                SPIR-V
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Vulkan/Vulkan-web.html" >
                                Web
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Render Engineering
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-graphics-apis.html" >
                                Graphics APIs
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-shader-languages.html" >
                                Shader Languages
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-tools.html" >
                                Tools
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-choosing-the-space-to-compute-lighting.html" >
                                Choosing the Space to compute Lighting
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-bsdf-bidirectional-scattering-distribution-function.html" >
                                BSDF (Bidirectional Scattering Distribution Function)
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-material.html" >
                                Material
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-direct-lighting.html" >
                                Direct Lighting
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-shadows.html" >
                                Shadows
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-skybox-skydome.html" >
                                Skybox / Skydome
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-transparency.html" >
                                Transparency
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-global-illumination-indirect-lighting.html" >
                                Global Illumination / Indirect Lighting
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-global-illumination-solutions.html" >
                                Global Illumination - Solutions
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-global-illumination-discarded-solutions.html" >
                                Global Illumination - Discarded Solutions
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-lightmaps.html" >
                                Lightmaps
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-post-processing.html" >
                                Post-Processing
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-anti-aliasing.html" >
                                Anti-Aliasing
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-light-path-rendering-method.html" >
                                Light Path / Rendering Method
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Render Engineering/Render Engineering-optimization-techniques.html" >
                                Optimization Techniques
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Graphics and Shaders
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Graphics and Shaders/Graphics and Shaders-sources.html" >
                                Sources
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Graphics and Shaders/Graphics and Shaders-math-linear-algebra.html" >
                                Math, Linear Algebra
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Graphics and Shaders/Graphics and Shaders-spaces-transformations-and-graphics-pipeline.html" >
                                Spaces, Transformations and Graphics Pipeline
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Graphics and Shaders/Graphics and Shaders-common-techniques.html" >
                                Common Techniques
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Graphics and Shaders/Graphics and Shaders-shaders.html" >
                                Shaders
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        GLSL
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/GLSL/GLSL-basic.html" >
                                Basic
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/GLSL/GLSL-storage-qualifiers.html" >
                                Storage Qualifiers
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/GLSL/GLSL-layout-qualifiers.html" >
                                Layout Qualifiers
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        GPU
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/GPU/GPU-execution-building-blocks.html" >
                                Execution Building Blocks
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/GPU/GPU-specialized-units-and-instructions.html" >
                                Specialized units &amp; instructions
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/GPU/GPU-memory.html" >
                                Memory
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/GPU/GPU-cache.html" >
                                Cache
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/GPU/GPU-gpu-va-virtual-address.html" >
                                GPU VA (Virtual Address)
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/GPU/GPU-tiled-gpus.html" >
                                Tiled-GPUs
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Slang
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Slang-slang.html" >
                                Slang
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        Font Rendering
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Font Rendering-techniques.html" >
                                Techniques
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Font Rendering-text-processing-pipeline.html" >
                                Text Processing Pipeline
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Font Rendering-concepts.html" >
                                Concepts
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Font Rendering-formats.html" >
                                Formats
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Font Rendering-libs.html" >
                                Libs
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Font Rendering-tools.html" >
                                Tools
							</a>
						</li>
					</ul>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/Font Rendering-fonts.html" >
                                Fonts
							</a>
						</li>
					</ul>
				</details>
				<details
>
					<summary>
                        OpenGL
					</summary>
					<ul>
						<li>
							<a
								class="" 
								href="/studies/Graphics Programming/OpenGL/OpenGL-about.html" >
                                About
							</a>
						</li>
					</ul>
				</details>
			</nav>
		</aside>
		<div
			id="central-wrapper" >
			<a
				href="/" 
				class="icon-home" >

                <svg version="1.1" id="Capa_1" fill="currentColor" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 299.021 299.021" xml:space="preserve" style="color: whitesmoke;">
                    <g>
                        <g>
                            <path d="M292.866,254.432c-2.288,0-4.443-1.285-5.5-3.399c-0.354-0.684-28.541-52.949-146.169-54.727v51.977
                                c0,2.342-1.333,4.48-3.432,5.513c-2.096,1.033-4.594,0.793-6.461-0.63L2.417,154.392C0.898,153.227,0,151.425,0,149.516
                                c0-1.919,0.898-3.72,2.417-4.888l128.893-98.77c1.87-1.426,4.365-1.667,6.461-0.639c2.099,1.026,3.432,3.173,3.432,5.509v54.776
                                c3.111-0.198,7.164-0.37,11.947-0.37c43.861,0,145.871,13.952,145.871,143.136c0,2.858-1.964,5.344-4.75,5.993
                                C293.802,254.384,293.34,254.432,292.866,254.432z"></path>
                        </g>
                    </g>
                </svg>
                    
			</a>
			<main>
				<article
					id="note-article" >
					<header>
						<h1>
                            Profiling
						</h1>
						<p>
							<time
								datetime="2025-08-01" >
                                üïí Created: 2025-08-01
							</time>
							<time
								datetime="2026-01-22" >
                                | Updated: 2026-01-22
							</time>
						</p>
					</header>
					<div
						id="note-content" >
<ul>
	<li>
		<p>
            Provides your application with a mechanism to time the execution of commands on the GPU.
		</p>
	</li>
	<li>
		<p>
            You can specify any pipeline stage at which the timestamp should be written, a lot of stage combinations and orderings won‚Äôt give meaningful result.
		</p>
		<ul>
			<li>
				<p>
                    So while it may may sound reasonable to write timestamps for the vertex and fragment shader stage directly one after another, that will usually not return meaningful results due to how the GPU works.
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            You can‚Äôt compare timestamps taken on different queues.
		</p>
	</li>
	<li>
		<p>
			<a
				href="https://docs.vulkan.org/samples/latest/samples/api/timestamp_queries/README.html" 
				class="external-link" 
				target="_blank" >
                Sample
			</a>
            .
		</p>
		<ul>
			<li>
				<p>
                    We‚Äôll be using 6 time points, one for the start and one for the end of three render passes.
				</p>
			</li>
			<li>
				<p>
                    The code 
                    <code>samples/api/timestamp_queries</code>
                    :
				</p>
				<ul>
					<li>
						<p>
                            Uses 
                            <code>QUERY_RESULT_64 | QUERY_RESULT_WAIT</code>
                            , so it's not optimal.
						</p>
					</li>
					<li>
						<p>
                            The query is made after 
                            <code>vkQueueSubmit()</code>
                            .
						</p>
					</li>
				</ul>
			</li>
		</ul>
	</li>
	<li>
		<p>
			<a
				href="https://pavelsmejkal.net/Posts/GPUTimingBasics" 
				class="external-link" 
				target="_blank" >
                GPU Timing Basics
			</a>
            .
		</p>
		<ul>
			<li>
				<p>
                    Vulkan and DX12.
				</p>
			</li>
			<li>
				<p>
                    Uses 
                    <code>QUERY_RESULT_64</code>
                    &nbsp;and enables the 
                    <code>hostQueryReset</code>
                    &nbsp;for 
                    <code>vk.PhysicalDeviceVulkan12Features</code>
                    , using 
                    <code>vk.ResetQueryPool()</code>
                    &nbsp;right after creating the 
                    <code>QueryPool</code>
                    .
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
			<input
				type="checkbox" 
				disabled=""
>
            
			<a
				href="https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#queries" 
				class="external-link" 
				target="_blank" >
                Queries
			</a>
            .
		</p>
	</li>
	<li>
		<p>
            <code>vkCmdWriteTimestamp2</code>
            .
		</p>
		<ul>
			<li>
				<p>
                    This is pretty much the same as the 
                    <code>vkCmdWriteTimestamp</code>
                    &nbsp;function used in this sample, but adds support for some additional pipeline stages using 
                    <code>VkPipelineStageFlags2</code>
                    .
				</p>
			</li>
		</ul>
	</li>
</ul>
<h3
	id="support" >
    Support
</h3>
<ul>
	<li>
		<p>
            Device limits:
		</p>
		<ul>
			<li>
				<p>
                    <code>timestampPeriod</code>
				</p>
				<ul>
					<li>
						<p>
                            If the limit of the physical device is greater than zero, timestamp queries are supported.
						</p>
					</li>
					<li>
						<p>
                            If your device has a 
                            <code>timestampPeriod</code>
                            &nbsp;of 1, so that one increment in the result maps to exactly one nanosecond.
						</p>
					</li>
					<li>
						<p>
                            It contains the number of nanoseconds it takes for a timestamp query value to be increased by 1 (&quot;tick&quot;).
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
                    <code>timestampComputeAndGraphics</code>
				</p>
				<ul>
					<li>
						<p>
                            If is 
                            <code>TRUE</code>
                            , timestamps are supported by every queue family that supports either graphics or compute operations
						</p>
					</li>
					<li>
						<p>
                            If not, we need to check if the queue we want to use supports timestamps.
						</p>
					</li>
				</ul>
			</li>
		</ul>
	</li>
</ul>
<h3
	id="query-pool" >
    Query Pool
</h3>
<ul>
	<li>
		<p>
            A query pool is then used to either directly fetch or copy over the results to the host.
		</p>
	</li>
	<li>
		<p>
            Used to store and read back the results.
		</p>
	</li>
	<li>
		<p>
            <code>queryType</code>
		</p>
		<ul>
			<li>
				<p>
                    We set to 
                    <code>QUERY_TYPE_TIMESTAMP</code>
                    &nbsp;for using timestamp queries
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            <code>queryCount</code>
		</p>
		<ul>
			<li>
				<p>
                    The maximum number of the the timestamp query result this pool can store.
				</p>
			</li>
		</ul>
	</li>
</ul>
<h5
	id="reset" >
    Reset
</h5>
<ul>
	<li>
		<p>
            Before we can start writing data to the query pool, we need to reset it.
		</p>
	</li>
	<li>
		<p>
            <code>vkCmdResetQueryPool</code>
		</p>
		<ul>
			<li>
				<p>
                    At the start of the command buffer.
				</p>
			</li>
			<li>
				<p>
                    Sets the status of query indices [
                    <code>firstQuery</code>
                    , 
                    <code>firstQuery</code>
                    &nbsp;+ 
                    <code>queryCount</code>
                    &nbsp;- 1] to unavailable.
				</p>
			</li>
			<li>
				<p>
                    Defines an execution dependency between other query commands that reference the same query.
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
			<a
				href="https://docs.vulkan.org/spec/latest/chapters/queries.html#vkResetQueryPool" 
				class="external-link" 
				target="_blank" >
                <code>vkResetQueryPool()</code>
			</a>
            .
		</p>
	</li>
	<li>
		<p>
            <code>QUERY_POOL_CREATE_RESET_KHR</code>
		</p>
		<ul>
			<li>
				<p>
                    During Query Pool creation.
				</p>
			</li>
		</ul>
	</li>
</ul>
<h3
	id="writing" >
    Writing
</h3>
<ul>
	<li>
		<p>
            <code>vkCmdWriteTimestamp</code>
		</p>
		<ul>
			<li>
				<p>
                    Will request a timestamp to be written from the GPU for a certain pipeline stage and write that value to memory.
				</p>
			</li>
		</ul>
	</li>
</ul>
<h3
	id="reading" >
    Reading
</h3>
<ul>
	<li>
		<p>
            Reading back the results can be done in two ways:
		</p>
		<ul>
			<li>
				<p>
                    Copy the results into a 
                    <code>VkBuffer</code>
                    &nbsp;inside the command buffer using 
                    <code>vkCmdCopyQueryPoolResults</code>
				</p>
			</li>
			<li>
				<p>
                    Get the results after the command buffer has finished executing using 
                    <code>vkGetQueryPoolResults</code>
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            <code>vkGetQueryPoolResults()</code>
		</p>
		<ul>
			<li>
				<p>
                    <code>QUERY_RESULT_64</code>
				</p>
				<ul>
					<li>
						<p>
                            Will tell the api that we want to get the results as 64 bit values. Without this flag, we would only get 32 bit values. And since timestamp queries can operate in nanoseconds, only using 32 bits could result into an overflow.
						</p>
					</li>
					<li>
						<p>
                            if your device has a 
                            <code>timestampPeriod</code>
                            &nbsp;of 1, so that one increment in the result maps to exactly one nanosecond, with 32 bit precision you‚Äôd run into such an overflow after only about 0.43 seconds.
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
                    <code>QUERY_RESULT_WAIT</code>
				</p>
				<ul>
					<li>
						<p>
                            Tells the api to wait for all results to be available. So when using this flag the values written to our 
                            <code>time_stamps</code>
                            &nbsp;vector is guaranteed to be available after calling 
                            <code>vkGetQueryPoolResults</code>
                            .
						</p>
					</li>
					<li>
						<p>
                            This is fine for our use-case where we want to immediately access the results, but may introduce unnecessary stalls in other scenarios.
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
                    <code>QUERY_RESULT_WITH_AVAILABILITY</code>
				</p>
				<ul>
					<li>
						<p>
                            Will let you poll the availability of the results and defer writing new timestamps until the results are available.
						</p>
					</li>
					<li>
						<p>
                            This should be the preferred way of fetching the results in a real-world application. Using this flag an additional availability value is inserted after each query value. If that value becomes non-zero, the result is available. You then check availability before writing the timestamp again.
						</p>
					</li>
				</ul>
			</li>
		</ul>
	</li>
</ul>
<h3
	id="occlusion-queries" >
    Occlusion Queries
</h3>
<ul>
	<li>
		<p>
            Occlusion queries track the number of samples that pass the per-fragment tests for a set of drawing commands. As such, occlusion queries are only available on queue families supporting graphics operations. The application 
			<strong>
                can
			</strong>
            &nbsp;then use these results to inform future rendering decisions.
		</p>
	</li>
	<li>
		<p>
            An occlusion query is begun and ended by calling 
            <code>vkCmdBeginQuery</code>
            &nbsp;and 
            <code>vkCmdEndQuery</code>
            , respectively.
		</p>
	</li>
	<li>
		<p>
            When an occlusion query begins, the count of passing samples always starts at zero.
		</p>
	</li>
	<li>
		<p>
            For each drawing command, the count is incremented as described in 
			<a
				href="https://docs.vulkan.org/spec/latest/chapters/fragops.html#fragops-samplecount" 
				class="external-link" 
				target="_blank" >
                Sample Counting
			</a>
            . If 
            <code>flags</code>
            &nbsp;does not contain 
            <code>QUERY_CONTROL_PRECISE</code>
            &nbsp;an implementation 
			<strong>
                may
			</strong>
            &nbsp;generate any non-zero result value for the query if the count of passing samples is non-zero.
		</p>
	</li>
</ul>
<h3
	id="pipeline-statistics-queries" >
    Pipeline Statistics Queries
</h3>
<ul>
	<li>
		<p>
            Pipeline statistics queries allow the application to sample a specified set of 
            <code>VkPipeline</code>
            &nbsp;counters. These counters are accumulated by Vulkan for a set of either drawing or dispatching commands while a pipeline statistics query is active. As such, pipeline statistics queries are available on queue families supporting compute operations.
		</p>
	</li>
	<li>
		<p>
            The availability of pipeline statistics queries is indicated by the 
            <code>pipelineStatisticsQuery</code>
            &nbsp;member of the 
            <code>VkPhysicalDeviceFeatures</code>
            &nbsp;object (see 
            <code>vkGetPhysicalDeviceFeatures</code>
            &nbsp;and 
            <code>vkCreateDevice</code>
            &nbsp;for detecting and requesting this query type on a 
            <code>VkDevice</code>
            ).
		</p>
	</li>
	<li>
		<p>
            A pipeline statistics query is begun and ended by calling 
            <code>vkCmdBeginQuery</code>
            &nbsp;and 
            <code>vkCmdEndQuery</code>
            , respectively.
		</p>
	</li>
	<li>
		<p>
            When a pipeline statistics query begins, all statistics counters are set to zero. While the query is active, the pipeline type determines which set of statistics are available, but these 
			<strong>
                must
			</strong>
            &nbsp;be configured on the query pool when it is created. If a statistic counter is issued on a command buffer that does not support the corresponding operation, or the counter corresponds to a shading stage which is missing from any of the pipelines used while the query is active, the value of that counter is 
			<strong>
                undefined
			</strong>
            &nbsp;after the query has been made available. At least one statistic counter relevant to the operations supported on the recording command buffer 
			<strong>
                must
			</strong>
            &nbsp;be enabled.
		</p>
	</li>
</ul>
<h3
	id="performance-queries" >
    Performance Queries
</h3>
<ul>
	<li>
		<p>
            Provide applications with a mechanism for getting performance counter information about the execution of command buffers, render passes, and commands. [asdasd]
		</p>
	</li>
	<li>
		<p>
            Each queue family advertises the performance counters that 
			<strong>
                can
			</strong>
            &nbsp;be queried on a queue of that family via a call to 
			<a
				href="https://docs.vulkan.org/spec/latest/chapters/devsandqueues.html#vkEnumeratePhysicalDeviceQueueFamilyPerformanceQueryCountersKHR" 
				class="external-link" 
				target="_blank" >
                vkEnumeratePhysicalDeviceQueueFamilyPerformanceQueryCountersKHR
			</a>
            . Implementations 
			<strong>
                may
			</strong>
            &nbsp;limit access to performance counters based on platform requirements or only to specialized drivers for development purposes.
		</p>
	</li>
	<li>
		<p>
            Performance queries use the existing 
			<a
				href="https://docs.vulkan.org/spec/latest/chapters/queries.html#vkCmdBeginQuery" 
				class="external-link" 
				target="_blank" >
                vkCmdBeginQuery
			</a>
            &nbsp;and 
			<a
				href="https://docs.vulkan.org/spec/latest/chapters/queries.html#vkCmdEndQuery" 
				class="external-link" 
				target="_blank" >
                vkCmdEndQuery
			</a>
            &nbsp;to control what command buffers, render passes, or commands to get performance information for.
		</p>
	</li>
</ul>
<h3
	id="mesh-shaders-queries" >
    Mesh Shaders Queries
</h3>
<ul>
	<li>
		<p>
            When a generated mesh primitives query is active, the mesh-primitives-generated count is incremented every time a primitive emitted from the mesh shader stage reaches the fragment shader stage. When a generated mesh primitives query begins, the mesh-primitives-generated count starts from zero.
		</p>
	</li>
	<li>
		<p>
            Mesh and task shader pipeline statistics queries function the same way that invocation queries work for other shader stages, counting the number of times the respective shader stage has been run. When the statistics query begins, the invocation counters start from zero.
		</p>
	</li>
</ul>
<h3
	id="result-status-queries" >
    Result Status Queries
</h3>
<ul>
	<li>
		<p>
            Result status queries serve a single purpose: allowing the application to determine whether a set of operations have completed successfully or not, as indicated by the 
			<a
				href="https://docs.vulkan.org/spec/latest/chapters/queries.html#VkQueryResultStatusKHR" 
				class="external-link" 
				target="_blank" >
                VkQueryResultStatusKHR
			</a>
            &nbsp;value written when retrieving the result of a query using the 
            <code>QUERY_RESULT_WITH_STATUS_KHR</code>
            &nbsp;flag.
		</p>
	</li>
	<li>
		<p>
            Unlike other query types, result status queries do not track or maintain any other data beyond the completion status, thus no other data is written when retrieving their results.
		</p>
	</li>
	<li>
		<p>
            Support for result status queries is indicated by 
			<a
				href="https://docs.vulkan.org/spec/latest/chapters/devsandqueues.html#VkQueueFamilyQueryResultStatusPropertiesKHR" 
				class="external-link" 
				target="_blank" >
                VkQueueFamilyQueryResultStatusPropertiesKHR
			</a>
            ::
            <code>queryResultStatusSupport</code>
            &nbsp;, as returned by 
			<a
				href="https://docs.vulkan.org/spec/latest/chapters/devsandqueues.html#vkGetPhysicalDeviceQueueFamilyProperties2" 
				class="external-link" 
				target="_blank" >
                vkGetPhysicalDeviceQueueFamilyProperties2
			</a>
            &nbsp;for the queue family in question.
		</p>
	</li>
</ul>
<h3
	id="other-queries" >
    Other Queries
</h3>
<ul>
	<li>
		<p>
            Transform Feedback Queries.
		</p>
	</li>
	<li>
		<p>
            Primitives Generated Queries.
		</p>
	</li>
	<li>
		<p>
            Intel Performance Queries.
		</p>
	</li>
	<li>
		<p>
            Video Encode Feedback Queries.
		</p>
	</li>
</ul>

					</div>
					<footer
						id="previous-next" >
					</footer>
				</article>
			</main>
			<footer
				id="central-footer" >
                üßë‚Äçüíª built by and copyright
				<a
					href="https://github.com/caioraphael1" 
					target="_blank" >
                    Caio Raphael
				</a>
                üìÖ 2025-10-21 .&nbsp;&nbsp;2026-01-23 üöÄ
			</footer>
		</div>
		<script
			src="/static/studies.89309.js" >
		</script>
	</body>
</html>
