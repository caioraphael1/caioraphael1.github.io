<!doctype html>
<html
	lang="en" >
	<head>
		<title>
            Caio Raphael
		</title>
		<meta
			charset="utf-8" >
		<meta
			name="viewport" 
			content="width=device-width, initial-scale=1" >
		<meta
			name="description" 
			content="Senior Game Developer, Engine Developer, Low-Level Network, Low-Level Systems" >
		<meta
			name="author" 
			content="Caio Raphael" >
		<meta
			name="theme-color" 
			content="#ffffff" 
			media="(prefers-color-scheme: light)" >
		<meta
			name="theme-color" 
			content="#101010" 
			media="(prefers-color-scheme: dark)" >
		<link
			rel="icon" 
			href="/assets/icon.ico" >
		<link
			rel="icon" 
			href="/assets/icon-16x16.png" 
			sizes="16x16" 
			type="image/png" >
		<link
			rel="icon" 
			href="/assets/icon-32x32.png" 
			sizes="32x32" 
			type="image/png" >
		<script>
window.MathJax = {
                tex: {
                    inlineMath: [['$', '$']],
                    displayMath: [['$$', '$$']]
                }
                };
		</script>
		<script
			src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" >
		</script>
		<script
			type="module" >

                    import hljs from 'https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/highlight.min.js';
                    import hljs_odin from 'https://unpkg.com/highlightjs-odinlang@1.4.0/dist/odin.es.min.js';
                    import hljs_glsl from 'https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/languages/glsl.min.js';
                    import hljs_swift  from 'https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/languages/swift.min.js';
                    hljs.registerLanguage('odin', hljs_odin);
                    hljs.registerLanguage('glsl', hljs_glsl);
                    hljs.registerLanguage('gdscript', hljs_swift);
                    hljs.highlightAll();
                
		</script>
		<link
			rel="stylesheet" 
			href="/static/studies.34696.css" >
	</head>
	<body>
		<aside
			id="left-sidebar-wrapper" >
			<div
				id="left-sidebar" >
				<header>
					<a
						href="/" 
						class="site-logo" >
                        Caio Raphael
					</a>
					<p
						class="breadcrums-division" >
                        /
					</p>
					<a
						href="/studies/_index.html" 
						class="breadcrumbs-studies" >
                        Studies
					</a>
				</header>
				<nav>
					<details
						open="">
						<summary>
                            Databases - SQL - Relational
						</summary>
						<ul>
							<li>
								<a
									class="" 
									href="/studies/Databases/Databases - SQL - Relational/Databases - SQL - Relational-basic-concepts.html" >
                                    Basic Concepts
								</a>
							</li>
						</ul>
						<ul>
							<li>
								<a
									class="active" 
									href="/studies/Databases/Databases - SQL - Relational/Databases - SQL - Relational-normalization.html" >
                                    Normalization
								</a>
								<ul>
									<li>
										<a
											href="#not-normalized" >
                                            Not normalized
										</a>
										<ul>
										</ul>
									</li>
									<li>
										<a
											href="#1nf" >
                                            1NF
										</a>
										<ul>
										</ul>
									</li>
									<li>
										<a
											href="#2nf" >
                                            2NF
										</a>
										<ul>
										</ul>
									</li>
									<li>
										<a
											href="#3nf-boyce-codd-normal-form-bcnf" >
                                            3NF / Boyce-Codd Normal Form (BCNF)
										</a>
										<ul>
										</ul>
									</li>
									<li>
										<a
											href="#4nf" >
                                            4NF
										</a>
										<ul>
										</ul>
									</li>
									<li>
										<a
											href="#5nf" >
                                            5NF
										</a>
										<ul>
										</ul>
									</li>
									<li>
										<a
											href="#domain-key-normal-form" >
                                            Domain Key Normal Form
										</a>
									</li>
								</ul>
							</li>
						</ul>
						<ul>
							<li>
								<a
									class="" 
									href="/studies/Databases/Databases - SQL - Relational/Databases - SQL - Relational-database-platforms.html" >
                                    Database Platforms
								</a>
							</li>
						</ul>
					</details>
					<details
>
						<summary>
                            Databases - MongoDB - Document Oriented
						</summary>
						<ul>
							<li>
								<a
									class="" 
									href="/studies/Databases/Databases - MongoDB - Document Oriented-about.html" >
                                    About
								</a>
							</li>
						</ul>
						<ul>
							<li>
								<a
									class="" 
									href="/studies/Databases/Databases - MongoDB - Document Oriented-operations.html" >
                                    Operations
								</a>
							</li>
						</ul>
						<ul>
							<li>
								<a
									class="" 
									href="/studies/Databases/Databases - MongoDB - Document Oriented-godot-driver.html" >
                                    Godot Driver
								</a>
							</li>
						</ul>
					</details>
					<details
>
						<summary>
                            Databases - Object Oriented - ORMs
						</summary>
						<ul>
							<li>
								<a
									class="" 
									href="/studies/Databases/Databases - Object Oriented - ORMs-object-oriented.html" >
                                    Object Oriented
								</a>
							</li>
						</ul>
						<ul>
							<li>
								<a
									class="" 
									href="/studies/Databases/Databases - Object Oriented - ORMs-orm-object-relational-mapping.html" >
                                    ORM (Object-Relational Mapping)
								</a>
							</li>
						</ul>
					</details>
				</nav>
			</div>
		</aside>
		<main
			id="central-wrapper" >
			<main
				id="note-wrapper" >
				<header
					id="note-header" >
					<h1>
                        Normalization
					</h1>
					<p>
						<time
							datetime="2024-12-13" >
                            üïí Created: 2024-12-13
						</time>
						<time
							datetime="2026-01-23" >
                            | Updated: 2026-01-23
						</time>
					</p>
				</header>
				<article
					id="note-content" >
<ul>
	<li>
		<p>
			<a
				href="https://www.youtube.com/watch?v=GFQaEYEc8_8" 
				class="external-link" 
				target="_blank" >
                Normalization 1NF, 2NF, 3NF, 4NF, 5NF
			</a>
            .
		</p>
		<ul>
			<li>
				<p>
                    At the end of the video there is a summary of all the ‚ÄúNormal Forms‚Äù.
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            <img src="assets/2026-01-06_14-42-38.png" width="400" >
            .
		</p>
	</li>
</ul>
<h3
	id="not-normalized" >
    Not normalized
</h3>
<ul>
	<li>
		<p>
            <img src="assets/2026-01-06_13-17-22.png" width="600" >
            .
		</p>
	</li>
	<li>
		<p>
            DoD Book:
		</p>
		<ul>
			<li>
				<p>
                    <img src="assets/2026-01-06_13-20-26.png" width="400" >
                    .
				</p>
				<ul>
					<li>
						<p>
                            The table 
                            <code>DoorsTo, Locked, etc</code>
                            &nbsp;is a continuation of the table 
                            <code>RoomID, MeshID, TextureID, etc</code>
                            .
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
                    The NULLs in the rows replace the optional content of the objects. If an object instance doesn't have a certain attribute then we replace those features with NULLs. There are also elements which contain more than one item of data.
				</p>
			</li>
			<li>
				<p>
                    Having multiple doors per room is tricky to handle in this table. How would you figure out what doors it had? The same goes for whether the door is locked, and whether there are any pickups. The first stage in normalizing is going to be reducing the number of elements in each cell to 1, and increasing it to 1 where it's currently NULL.
				</p>
			</li>
		</ul>
	</li>
</ul>
<h3
	id="1nf" >
    1NF
</h3>
<ul>
	<li>
        <img src="assets/2026-01-06_14-10-40.png" width="400" >

	</li>
	<li>
		<p>
            If a table is in first normal form, then every cell contains one and only one atomic value. That is, no arrays of values, and no NULL entries. First normal form also requires every row be distinct.
		</p>
	</li>
	<li>
		<p>
            First normal form can be described as making sure the tables are not sparse. We require that there be no NULL pointers and that there be no arrays of data in each element of data. This can be performed as a process of moving the repeats and all the optional content to other tables. Anywhere there is a NULL, it implies optional content.
		</p>
	</li>
	<li>
		<p>
            DoD Book:
		</p>
		<ul>
			<li>
				<p>
                    For the Pickups Table:
				</p>
				<ul>
					<li>
                        <img src="assets/2026-01-06_13-16-59.png" width="400" >

					</li>
					<li>
						<p>
                            Two things become evident at this point, firstly that normalization appears to create more tables and fewer columns in each table, secondly that there are only rows for things which matter. The former is worrisome, as it means more memory usage. The latter is interesting as when using an object-oriented approach, we allow objects to optionally have attributes. Optional attributes cause us to check they are not NULL before continuing. If we store data like this, then we know everything is not NULL. Moving away from having to do a null check at all will make your code more concise, and you have less state to consider when trying to reason about your systems.
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
                    For the Rooms Table:
				</p>
				<ul>
					<li>
						<p>
                            In there we saw single elements that contained multiple atomic values. We need to remove all elements from this table that do not conform to the rules of first normal form. First, we remove reference to the pickups, as they had various quantities of elements, from none to many. Then we must consider the traps, as even though there was only ever one trap, there wasn't always a trap. Finally, we must strip out the doors, as even though every room has a door, they often had more than one. Remember that the rule is one and only one entry in every meeting of row and column. In table [*] it shows how we only keep columns that are in a one to one relationship with the RoomID.
						</p>
					</li>
					<li>
                        <img src="assets/2026-01-06_13-22-22.png" width="400" >

					</li>
					<li>
						<p>
                            Now we will make new tables for Pickups, Doors, and Traps.
						</p>
					</li>
					<li>
						<p>
                            <img src="assets/2026-01-06_13-45-12.png" width="400" >
                            .
						</p>
					</li>
					<li>
						<p>
                            <img src="assets/2026-01-06_13-45-21.png" width="400" >
                            .
						</p>
					</li>
					<li>
						<p>
                            If you look at the Doors table, you can immediately tell that neither column is a candidate for the primary key, as neither contain only unique values. What is unique though is the combination of values, so the primary key is made up of both columns. In the table LockedDoors, FromRoom and ToRoom are being used as a lookup into the Doors table. This is often called a foreign key, meaning that there exists a table for which these columns directly map to that table's primary key.
						</p>
					</li>
					<li>
						<p>
                            In this case, the primary key is made up of two columns, so the LockedDoors table has a large foreign key and a small bit of extra detail about that entry in the foreign table.
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
                    Laying out the data in this way takes less space in larger projects as the number of NULL entries or arrays would have only increased with increased complexity of the level file. By laying out the data this way, we can add new features without having to revisit the original objects. For example, if we wanted to add monsters, normally we would not only have to add a new object for the monsters, but also add them to the room objects. In this format, all we need to do is add a new table such as the table below.
				</p>
			</li>
			<li>
				<p>
                    <img src="assets/2026-01-06_13-47-08.png" width="400" >
                    .
				</p>
			</li>
			<li>
				<p>
                    And now we have information about the monster and what room it starts in without touching any of the original level data.
				</p>
			</li>
		</ul>
	</li>
</ul>
<h5
	id="many-elements" >
    Many elements
</h5>
<ul>
	<li>
		<p>
            They‚Äôre all valid in different contexts.
		</p>
	</li>
	<li>
		<p>
            Repeated rows (relational / normalized) ‚Äî baseline
		</p>
<pre><code class="language-txt" data-lang="txt">InventoryItems
-------------------------
| inventory_id | item&nbsp;&nbsp;&nbsp;&nbsp;|
-------------------------
| 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| sword&nbsp;&nbsp; |
| 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| ammo&nbsp;&nbsp;&nbsp;&nbsp;|
| 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| fruit&nbsp;&nbsp; |
</code></pre>
		<ul>
			<li>
				<p>
                    For ECS:
				</p>
				<ul>
					<li>
						<p>
                            Queries like query(Sprite) become ambiguous: do you draw one sprite or many? Extra logic required.
						</p>
					</li>
					<li>
						<p>
                            Cache locality degrades: the dense array now contains vectors/allocations per entity.
						</p>
					</li>
					<li>
						<p>
                            Systems that want only the main sprite must scan/branch inside the array for each entity.
						</p>
					</li>
				</ul>
			</li>
		</ul>
	</li>
	<li>
		<p>
            Single row with an array (grouped, still structured)
		</p>
<pre><code class="language-txt" data-lang="txt">Inventories
------------------------------
| inventory_id | items&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |
------------------------------
| 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [sword, ammo, fruit]
</code></pre>
	</li>
	<li>
		<p>
            Single row with a map / dictionary (counts included):
		</p>
<pre><code class="language-txt" data-lang="txt">Inventories
----------------------------------------
| inventory_id | items&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |
----------------------------------------
| 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| { sword:1, ammo:50, fruit:3 }
</code></pre>
	</li>
</ul>
<h3
	id="2nf" >
    2NF
</h3>
<ul>
	<li>
		<p>
			<strong>
                Problem
			</strong>
            :
		</p>
		<ul>
			<li>
				<p>
                    <img src="assets/2026-01-06_14-21-49.png" width="400" >
                    .
				</p>
			</li>
			<li>
				<p>
					<em>
                        Deletion Anomaly
					</em>
                    :
				</p>
				<ul>
					<li>
						<p>
                            If 
                            <code>gila19</code>
                            &nbsp;loses its only item, all information for this player is lost.
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
					<em>
                        Update Anomaly
					</em>
                    :
				</p>
				<ul>
					<li>
						<p>
                            If 
                            <code>jdog21</code>
                            &nbsp;updates its 
                            <code>Player_Rating</code>
                            &nbsp;to 
                            <code>Advanced</code>
                            , but this is not updated across all of his entries, the data will be inconsistent.
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
					<em>
                        Insertion Anomaly
					</em>
                    :
				</p>
				<ul>
					<li>
						<p>
                            If a new player joins the game, but doesn't have any items yet, it cannot be inserted in the table.
						</p>
					</li>
				</ul>
			</li>
		</ul>
	</li>
	<li>
		<p>
			<strong>
                Fixing with 2NF
			</strong>
            :
		</p>
		<ul>
			<li>
				<p>
                    <img src="assets/2026-01-06_14-22-35.png" width="400" >
                    .
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            DoD Book:
		</p>
		<ul>
			<li>
				<p>
                    Second normal form is about trying to pull out columns that don't depend on only a part of the primary key. This can be caused by having a table that requires a compound primary key, and some attributes of the row only being dependent on part of that compound key. An example might be where you have weapons defined by quality and type, and the table looks like that in table [*], what you can see is that the primary key must be compound, as there are no columns with unique values here.
				</p>
			</li>
			<li>
                <img src="assets/2026-01-06_13-48-05.png" width="400" >

			</li>
			<li>
				<p>
                    It makes sense for us looking at the table that the primary key should be the compound of WeaponType and WeaponQuality, as it's a fairly obvious move for us to want to look up damage amount and damage type values based on what weapon we're using. It's also possible to notice that the DamageType does not depend on the WeaponQuality, and in fact only depends on the WeaponType. That's what we mean about depending on part of the key. Even though each weapon is defined in 1NF, the type of damage being dealt currently relies on too little of the primary key to allow this table to remain in 2NF. We split the table out in table [*] to remove the column that only relies on WeaponType. If we found a weapon that changed DamageType based on quality, then we would put the table back the way it was. An example might be the badly damaged morningstar, which no longer does piercing damage, but only bludgeons.
				</p>
			</li>
			<li>
                <img src="assets/2026-01-06_13-49-29.png" width="400" >

			</li>
		</ul>
	</li>
</ul>
<h3
	id="3nf-boyce-codd-normal-form-bcnf" >
    3NF / Boyce-Codd Normal Form (BCNF)
</h3>
<ul>
	<li>
		<p>
			<strong>
                Problem
			</strong>
            :
		</p>
		<ul>
			<li>
				<p>
                    <img src="assets/2026-01-06_14-17-53.png" width="400" >
                    .
				</p>
			</li>
			<li>
				<p>
                    The 
                    <code>Player_Rating</code>
                    &nbsp;depends on 
                    <code>Player_Skill_Level</code>
                    .
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
			<strong>
                Fixing with 3NF
			</strong>
            :
		</p>
		<ul>
			<li>
				<p>
                    <img src="assets/2026-01-06_14-16-31.png" width="400" >
                    .
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
            DoD Book:
		</p>
		<ul>
			<li>
				<p>
                    When considering further normalization, we first have to remove any transitive dependencies. By this we mean any dependencies on the primary key only via another column in the row.
				</p>
			</li>
			<li>
				<p>
                    Assets:
				</p>
				<ul>
					<li>
						<p>
                            <img src="assets/2026-01-06_14-48-51.png" width="400" >
                            .
						</p>
					</li>
				</ul>
			</li>
			<li>
				<p>
                    Rooms:
				</p>
				<ul>
					<li>
                        <img src="assets/2026-01-06_14-48-28.png" width="400" >

					</li>
				</ul>
			</li>
		</ul>
	</li>
</ul>
<h3
	id="4nf" >
    4NF
</h3>
<ul>
	<li>
		<p>
			<strong>
                Problem
			</strong>
            :
		</p>
		<ul>
			<li>
				<p>
                    <img src="assets/2026-01-06_14-37-22.png" width="400" >
                    .
				</p>
			</li>
			<li>
				<p>
                    Available 
                    <code>Color</code>
                    s should be totally independent from 
                    <code>Style</code>
                    s, but when adding a new 
                    <code>Color</code>
                    , this table requires having to add 2 entries: one for 
                    <code>Schoolhouse</code>
                    &nbsp;and 
                    <code>Bungalow</code>
                    .
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
			<strong>
                Fixing with 4NF
			</strong>
            :
		</p>
		<ul>
			<li>
				<p>
                    <img src="assets/2026-01-06_14-37-45.png" width="400" >
                    .
				</p>
			</li>
		</ul>
	</li>
</ul>
<h3
	id="5nf" >
    5NF
</h3>
<ul>
	<li>
		<p>
			<strong>
                Problem
			</strong>
            :
		</p>
		<ul>
			<li>
				<p>
                    <img src="assets/2026-01-06_14-39-34.png" width="400" >
                    .
				</p>
			</li>
			<li>
				<p>
                    If 
                    <code>Suzy</code>
                    &nbsp;decides that she likes the 
                    <code>Brand</code>
                    &nbsp;
                    <code>Frosty's</code>
                    &nbsp;as well, and we forget to add the entry 
                    <code>Suzy, Frosty's, Mint Chocolate Chip</code>
                    , then this is a logical inconsistency.
				</p>
			</li>
		</ul>
	</li>
	<li>
		<p>
			<strong>
                Fixing with 5NF
			</strong>
            :
		</p>
		<ul>
			<li>
				<p>
                    <img src="assets/2026-01-06_14-41-37.png" width="400" >
                    .
				</p>
			</li>
		</ul>
	</li>
</ul>
<h3
	id="domain-key-normal-form" >
    Domain Key Normal Form
</h3>
<ul>
	<li>
		<p>
            Domain key normal form is normally thought of as the last normal form, but for developing efficient data structures, it's one of the things best studied early and often. The term domain knowledge is preferable when writing code as it makes more immediate sense and encourages use outside of keys and tables. Domain knowledge is the idea that data depends on other data, but only given information about the domain in which it resides. Domain knowledge can be as simple as awareness of a colloquialism for something, such as knowing that a certain number of degrees Celsius or Fahrenheit is hot, or whether some SI unit relates to a man-made concept such as 100m/s being rather quick.
		</p>
	</li>
	<li>
		<p>
            An example of where domain knowledge can help with catching issues can be with putting human interpretations of values into asserts. Consider an assert for catching physics systems blowups. What is a valid expected range of values for acceleration? Multiply it by ten, and you have a check for when everything goes a bit crazy.
		</p>
	</li>
	<li>
		<p>
            Some applications avoid the traditional inaccurate and erratic countdown timer, and resort to human-readable forms such as in a few minutes or time to grab a coffee, however domain knowledge isn't just about presenting a human interpretation of data. For example things such as the speed of sound, of light, speed limits and average speed of traffic on a given road network, psychoacoustic properties, the boiling point of water, and how long it takes a human to react to any given visual input. All these facts may be useful in some way, but can only be put into an application if the programmer adds it specifically as procedural domain knowledge or as an attribute of a specific instance.
		</p>
	</li>
	<li>
		<p>
            Domain knowledge is what leads to inventions such as JPEG and MP3. Thinking about what is possible, what is possible to perceive, and what can possibly be affected by user actions, can reduce the amount of work done by an application, and can reduce its complexity. When you jump in a game with physics, we don't move the world down by fractions of a nanometer to represent the opposite reaction caused by the forces applied.
		</p>
	</li>
</ul>

				</article>
			</main>
			<footer
				id="central-footer" >
                üßë‚Äçüíª built and copyrighted by
				<a
					href="https://github.com/caioraphael1" 
					target="_blank" >
                    Caio Raphael
				</a>
                üìÖ 2025-2026 üöÄ
			</footer>
		</main>
		<script
			src="/static/studies.34696.js" >
		</script>
	</body>
</html>
